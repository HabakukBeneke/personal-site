---
import BaseLayout from "@layouts/base-layout.astro";
import { siteConfig } from "@site-config";
import { getAllProjects } from "@utils/portfolio";

const sortedProjects = await getAllProjects(true);
---

<BaseLayout
  title={`Portfolio · ${siteConfig.siteTitle}`}
  description={`Welcome to my portfolio! I'm a senior ${siteConfig.jobTitle} specializing in modern web technologies. Explore my projects, skills, and professional experience in software development.`}
>
  <section>
    <header>
      <h2 class="font-semibold text-2xl mb-6 pb-2">Portfolio</h2>
    </header>

    <ol class="space-y-8">
      {
        sortedProjects.map((project) => (
          <li>
            <div class="mb-1 flex items-center gap-2">
              <time class="text-xs text-gray-400">
                {new Date(project.date).toLocaleDateString(siteConfig.locale, {
                  year: "numeric",
                  month: "short",
                })}
              </time>
              {project.featured && (
                <span class="text-xs bg-gray-700 text-green-400 px-2 py-0.5 rounded">
                  Featured
                </span>
              )}
            </div>

            <h3 class="text-xl font-semibold secondary mb-1">
              {project.title}
            </h3>

            <p class="text-xs text-white mb-2">{project.description}</p>

            <div class="flex flex-wrap gap-1 mb-3">
              {project.technologies.map((tech: string) => (
                <span class="text-xs text-gray-400">
                  {tech}
                  {project.technologies.indexOf(tech) <
                    project.technologies.length - 1 && " • "}
                </span>
              ))}
            </div>

            <div class="flex gap-4 text-xs">
              {project.github && (
                <a
                  href={project.github}
                  target="_blank"
                  rel="noopener noreferrer"
                  aria-label={`View ${project.title} source code on GitHub`}
                  class="primary-link"
                >
                  source
                </a>
              )}
              {project.demo && (
                <a
                  href={project.demo}
                  target="_blank"
                  rel="noopener noreferrer"
                  aria-label={`View ${project.title} live demo`}
                  class="primary-link"
                >
                  demo
                </a>
              )}
              {project.link && !project.demo && !project.github && (
                <a
                  href={project.link}
                  target="_blank"
                  rel="noopener noreferrer"
                  aria-label={`Visit ${project.title}`}
                  class="primary-link"
                >
                  visit
                </a>
              )}
            </div>
          </li>
        ))
      }
    </ol>
  </section>
</BaseLayout>
