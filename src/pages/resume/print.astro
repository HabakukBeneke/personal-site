---
import PrintLayout from "@layouts/print-layout.astro";
import { calculateDuration } from "@utils/date";
import { getAllWorkExperiences, getWorkExperienceYears } from "@utils/resume";
import { siteConfig } from "@site-config";

const work_experience = await getAllWorkExperiences();
const years = await getWorkExperienceYears();
---

<PrintLayout
  title={`Resume · ${siteConfig.siteTitle}`}
  description={`Professional resume of ${siteConfig.authorName}, a Senior ${siteConfig.jobTitle} specializing in Javascript and modern web technologies.`}
>
  <section class="max-w-4xl mx-auto p-8">
    <header class="mb-8 text-center border-b pb-6">
      <h1 class="text-3xl font-bold mb-2">{siteConfig.authorName}</h1>
      <h2 class="text-xl text-gray-600 mb-2">Senior {siteConfig.jobTitle}</h2>
      <p class="text-sm text-gray-500">
        Professional Experience: {calculateDuration(years.start, years.end)}
      </p>
    </header>

    <main>
      <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-6 border-b pb-2">
          Work Experience
        </h2>
        <ol class="space-y-8">
          {
            work_experience.map((experience) => (
              <li class="avoid-break">
                <div class="mb-2">
                  <time class="text-sm text-gray-500 font-medium">
                    {`${experience.start_date} – ${experience.end_date}`}
                  </time>
                  <span class="text-sm text-gray-400 ml-2">
                    (
                    {calculateDuration(
                      experience.start_date,
                      experience.end_date
                    )}
                    )
                  </span>
                </div>
                <h3 class="text-xl font-semibold mb-1">
                  <span class="secondary">{experience.position}</span>
                  <span class="text-gray-600 text-base ml-2">at</span>
                  <span class="text-gray-700 ml-1">{experience.company}</span>
                </h3>
                <p class="text-sm text-yellow-600 mb-2">
                  {experience.location}
                </p>
                <p class="text-sm text-gray-800 mb-3 leading-relaxed">
                  {experience.description}
                </p>
                <ul class="list-disc ml-6 space-y-1">
                  {experience.responsibilities.map((responsibility) => (
                    <li class="text-sm text-gray-700 leading-relaxed">
                      {responsibility}
                    </li>
                  ))}
                </ul>
              </li>
            ))
          }
        </ol>
      </section>
    </main>
  </section>
</PrintLayout>
