---
import BaseLayout from '@/layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { calculateDuration } from '@/utils/dateUtils';

const resume = await getCollection('resume');
---

<BaseLayout title="Resume · Enrique Quero Vilar's Resume" description="Explore the professional profile of Enrique Quero Vilar, a Senior Frontend Developer specializing in Vue.js, Angular, and modern web technologies. Discover his career journey, key projects, and contributions to enterprise software development. Connect with Enrique and enhance your team with his expertise!">
  <section class="bg-gray-800 text-gray-300 py-10 px-6 rounded-lg shadow-lg">
    <header>
      <h2 class="font-semibold text-3xl mb-6 text-yellow-400 border-b border-yellow-400 pb-2">
        Resume
      </h2>
    </header>
    <div id="time-line">
      <ol class="relative border-s border-yellow-500">
        {resume.flatMap((item) => item.data.work_experience).map((experience) => (
          <li class="mb-10 ms-4">
            <div class="absolute w-3 h-3 bg-yellow-500 rounded-full mt-1.5 -start-1.5"></div>
            <time class="mb-1 text-sm font-normal text-gray-400">
              {experience.start_date} – {experience.end_date} ({calculateDuration(experience.start_date, experience.end_date)})
            </time>
            <h3 class="text-lg font-semibold text-white">
              {experience.position} at 
              <a 
                href={experience.company_url} 
                target="_blank" 
                rel="noopener noreferrer"
                class="text-yellow-400 hover:underline"
              >
                {experience.company}
              </a>
            </h3>
            <p class="text-sm text-gray-500">{experience.location}</p>
            <ul class="list-disc ms-4 text-gray-400">
              {experience.responsibilities.map((responsibility) => (
                <li class="mb-2">{responsibility}</li>
              ))}
            </ul>
          </li>
        ))}
      </ol>
    </div>
  </section>
</BaseLayout>
